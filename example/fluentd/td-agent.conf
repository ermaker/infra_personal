<source>
  @type dummy
  @label @teststream
  dummy {"log":"{\"data\":1}"}
  auto_increment_key count
  tag raw.dummy
</source>

<label @teststream>
  <filter raw.dummy>
    @type parser
    format json
    key_name log
    reserve_data yes
    hash_value_field log
    suppress_parse_error_log true
  </filter>

  <match raw.dummy>
    @type record_reformer
    tag ${tag_suffix[1]}
    <record>
      tag ${tag_suffix[1]}
    </record>
  </match>

  <match dummy>
    @type rewrite_tag_filter
    rewriterule1 tag ^(.*)$ $1.$1
  </match>
</label>

<match **>
  @type stdout
</match>


# <match docker.test.**>
#   type forward
#   <server>
#     host fluentd
#   </server>
# </match>