<source>
  type tail
  format json
  time_key time
  path /var/lib/docker/containers/*/*-json.log
  pos_file /var/lib/docker/containers/containers.log.pos
  time_format %Y-%m-%dT%H:%M:%S
  tag docker.*
</source>

<source>
  type forward
  port 24224
</source>

<match docker.**>
  type elasticsearch
  include_tag_key true
  hosts es:9200
  logstash_format true
  logstash_prefix docker

  # buffer
  buffer_type file
  buffer_path /var/lib/docker/fluentd/buffer/container.*.buffer
  buffer_chunk_limit 8m
  buffer_queue_limit 10000
  retry_limit 17
  flush_interval 5
</match>